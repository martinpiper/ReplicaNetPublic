<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ReplicaNet and RNLobby: CodeServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ReplicaNet and RNLobby
   &#160;<span id="projectnumber">1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>RNReplicaNet</b></li><li class="navelem"><b>RNLobby</b></li><li class="navelem"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html">CodeServer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classRNReplicaNet_1_1RNLobby_1_1CodeServer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CodeServer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="CodeServer_8h_source.html">CodeServer.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CodeServer:</div>
<div class="dyncontent">
<div class="center"><img src="classRNReplicaNet_1_1RNLobby_1_1CodeServer__inherit__graph.png" border="0" usemap="#CodeServer_inherit__map" alt="Inheritance graph"/></div>
<map name="CodeServer_inherit__map" id="CodeServer_inherit__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for CodeServer:</div>
<div class="dyncontent">
<div class="center"><img src="classRNReplicaNet_1_1RNLobby_1_1CodeServer__coll__graph.png" border="0" usemap="#CodeServer_coll__map" alt="Collaboration graph"/></div>
<map name="CodeServer_coll__map" id="CodeServer_coll__map">
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer_1_1CodeEntry.html">CodeEntry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:afdc1ccccef1cd1b090008f89977eff12"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>Reply</b> { <br/>
&#160;&#160;<b>kReply_ValidKey</b> = 0, 
<b>kReply_UnspecifiedError</b>, 
<b>kReply_InvalidKey</b>, 
<b>kReply_KeyInUse</b>, 
<br/>
&#160;&#160;<b>kReply_Timeout</b>, 
<b>kReply_CorruptReply</b>
<br/>
 }</td></tr>
<tr class="separator:afdc1ccccef1cd1b090008f89977eff12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99fb83031ce9923c84392b4e92f956b5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <b>kDefaultPort</b> = 4003
 }</td></tr>
<tr class="separator:a99fb83031ce9923c84392b4e92f956b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6403e5f26388c5447710d7aacb960400"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a6403e5f26388c5447710d7aacb960400">ReadCodeFile</a> (const char *filename, const bool duplicateCodeCheck=false)</td></tr>
<tr class="separator:a6403e5f26388c5447710d7aacb960400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e238baee5db86d1b75685c31bd53333"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a7e238baee5db86d1b75685c31bd53333">AddCode</a> (const char *code, const bool duplicateCodeCheck=false, const int userSuppliedReply=0)</td></tr>
<tr class="separator:a7e238baee5db86d1b75685c31bd53333"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7beead29f96987560815b832f65159af"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a7beead29f96987560815b832f65159af">RemoveCode</a> (const char *code=0)</td></tr>
<tr class="separator:a7beead29f96987560815b832f65159af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbc27f032cecdcd496b9ed5a9e3dd5c2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#abbc27f032cecdcd496b9ed5a9e3dd5c2">Start</a> (const <a class="el" href="structRNReplicaNet_1_1XPAddress.html">XPAddress</a> &amp;address=<a class="el" href="structRNReplicaNet_1_1XPAddress.html">XPAddress</a>(kDefaultPort))</td></tr>
<tr class="separator:abbc27f032cecdcd496b9ed5a9e3dd5c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af244830161c8e38375bdda05bc66cb3c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#af244830161c8e38375bdda05bc66cb3c">Stop</a> (bool hardware=false)</td></tr>
<tr class="separator:af244830161c8e38375bdda05bc66cb3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc8dd58a7a9ad30e0b783cd6977fca74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#afc8dd58a7a9ad30e0b783cd6977fca74">SetEncryptionKey</a> (const void *data, const int length)</td></tr>
<tr class="separator:afc8dd58a7a9ad30e0b783cd6977fca74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6c925816eb69c41b65c96882fed072"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a7d6c925816eb69c41b65c96882fed072">SetCodeTimeout</a> (const float time=(60.0f *30.0f))</td></tr>
<tr class="separator:a7d6c925816eb69c41b65c96882fed072"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f92ea6ff7b3984251d5b586858e1c17"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a2f92ea6ff7b3984251d5b586858e1c17">GetCodeTimeout</a> (void) const </td></tr>
<tr class="separator:a2f92ea6ff7b3984251d5b586858e1c17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae150b827c72199a8c23e3a3234f1ef06"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#ae150b827c72199a8c23e3a3234f1ef06">CallbackDataReceived</a> (void *data, int &amp;length, const int maxLength, <a class="el" href="structRNReplicaNet_1_1XPAddress.html">XPAddress</a> &amp;address)</td></tr>
<tr class="separator:ae150b827c72199a8c23e3a3234f1ef06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeae9e8604f408868c2b81418317e6987"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#aeae9e8604f408868c2b81418317e6987">CallbackVersion</a> (const int version)</td></tr>
<tr class="separator:aeae9e8604f408868c2b81418317e6987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e8d35a9bfb1d272f1233b9850fe6253"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a0e8d35a9bfb1d272f1233b9850fe6253">CallbackKeyData</a> (char *keyData, const int maxLength, int &amp;nOnce1, int &amp;nOnce2, bool &amp;updateDatabase)</td></tr>
<tr class="separator:a0e8d35a9bfb1d272f1233b9850fe6253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaff6b7faf39f033fd843ce1591ebbd1b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#aaff6b7faf39f033fd843ce1591ebbd1b">CallbackQueryReply</a> (Reply &amp;reply, int &amp;userSuppliedReply, int &amp;nOnce1, int &amp;nOnce2)</td></tr>
<tr class="separator:aaff6b7faf39f033fd843ce1591ebbd1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64d307e164169b771dc3f585f8cb3b68"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a64d307e164169b771dc3f585f8cb3b68">CallbackDataSend</a> (void *data, int &amp;length, const int maxLength, <a class="el" href="structRNReplicaNet_1_1XPAddress.html">XPAddress</a> &amp;address)</td></tr>
<tr class="separator:a64d307e164169b771dc3f585f8cb3b68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ecb9e1328a309e9f08504a9c79a22f7"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a4ecb9e1328a309e9f08504a9c79a22f7">CallbackQueryReplyTime</a> (const float seconds)</td></tr>
<tr class="separator:a4ecb9e1328a309e9f08504a9c79a22f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e6a01ace53eec6556e244350f9af572"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5e6a01ace53eec6556e244350f9af572"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a5e6a01ace53eec6556e244350f9af572">GetNumRequests</a> (void) const </td></tr>
<tr class="memdesc:a5e6a01ace53eec6556e244350f9af572"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the total number of codes queries. <br/></td></tr>
<tr class="separator:a5e6a01ace53eec6556e244350f9af572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21e824da074b814cea06609864d6dd4c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a21e824da074b814cea06609864d6dd4c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a21e824da074b814cea06609864d6dd4c">GetNumFailed</a> (void) const </td></tr>
<tr class="memdesc:a21e824da074b814cea06609864d6dd4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the total number of codes queries that were returned as kReply_InvalidKey. <br/></td></tr>
<tr class="separator:a21e824da074b814cea06609864d6dd4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ab2d957b83a2fa59d7c3bcdc36823a9ed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab2d957b83a2fa59d7c3bcdc36823a9ed"></a>
<a class="el" href="classRNReplicaNet_1_1RegistryManagerMap.html">RegistryManagerMap</a><br class="typebreak"/>
&lt; std::string, <a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer_1_1CodeEntry.html">CodeEntry</a>, <br class="typebreak"/>
<a class="el" href="structRNReplicaNet_1_1RNLobby_1_1CodeServer_1_1CodeEntry_1_1ThisLess.html">CodeEntry::ThisLess</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>mCodes</b></td></tr>
<tr class="separator:ab2d957b83a2fa59d7c3bcdc36823a9ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60dcae8fbbffaa201bade280b37f18a2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a60dcae8fbbffaa201bade280b37f18a2"></a>
<a class="el" href="classRNReplicaNet_1_1MutexClass.html">MutexClass</a>&#160;</td><td class="memItemRight" valign="bottom"><b>mCodesMutex</b></td></tr>
<tr class="separator:a60dcae8fbbffaa201bade280b37f18a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This code server uses a UDP socket to respond to queries for the validity of codes. The codes are stored in a file with one code per line. Use the <a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeClient.html" title="This code client queries for the validity of codes with the RNLobby::CodeServer. ">RNLobby::CodeClient</a> class to make queries to this server. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a7e238baee5db86d1b75685c31bd53333"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AddCode </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>duplicateCodeCheck</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>userSuppliedReply</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a code to the database in memory. Each code must be no longer than 255 characters. This function may be used when the code server has been started. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td>The code to add. </td></tr>
    <tr><td class="paramname">duplicateCodeCheck</td><td>If this is true then the code is checked to make sure it is not a duplicate code already stored in the database. The default is false, which disables the duplicate code check and makes adding codes slightly faster. </td></tr>
    <tr><td class="paramname">userSuppliedReply</td><td>This is returned from <a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeClient.html#a82dbb8bc038e0468de43463be2773e10">CodeClient::GetUserSuppliedReply()</a>. This is useful if the key server wishes to communicate that the key has billing problems, been suspended etc. To update userReply for an existing key you may enable duplicateCodeCheck or use <a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a7beead29f96987560815b832f65159af">RemoveCode()</a> and <a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a7e238baee5db86d1b75685c31bd53333">AddCode()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Success returns true, failure returns false. </dd></dl>

</div>
</div>
<a class="anchor" id="ae150b827c72199a8c23e3a3234f1ef06"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void CallbackDataReceived </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>maxLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRNReplicaNet_1_1XPAddress.html">XPAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This callback may be used to alter data after it has been received and before the data is processed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The pointer to the data. </td></tr>
    <tr><td class="paramname">length</td><td>The length of the data. If the output length changes then this variable can be used to pass the value back by reference. A returned length of zero discards the packet. </td></tr>
    <tr><td class="paramname">maxLength</td><td>The maximum length of the data buffer. Parameter length must not be greater than this value. </td></tr>
    <tr><td class="paramname">address</td><td>The network address for this data packet. The contents of the address may be changed if required. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a64d307e164169b771dc3f585f8cb3b68"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void CallbackDataSend </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>maxLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRNReplicaNet_1_1XPAddress.html">XPAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This callback may be used to alter any data in a reply, just before it gets sent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The pointer to the data. </td></tr>
    <tr><td class="paramname">length</td><td>The length of the data. If the output length changes then this variable can be used to pass the value back by reference. A returned length of zero discards the packet. </td></tr>
    <tr><td class="paramname">maxLength</td><td>The maximum length of the data buffer. Parameter length must not be greater than this value. </td></tr>
    <tr><td class="paramname">address</td><td>The network address for this data packet. The contents of the address may be changed if required. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0e8d35a9bfb1d272f1233b9850fe6253"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void CallbackKeyData </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>keyData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>maxLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>nOnce1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>nOnce2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>updateDatabase</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This callback may be used to alter the actual key queried before it is matched with the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyData</td><td>The pointer to a null terminated char string. </td></tr>
    <tr><td class="paramname">maxLength</td><td>The maximum length of the data buffer, including the null termination character. </td></tr>
    <tr><td class="paramname">nOnce1</td><td>The first nonce. </td></tr>
    <tr><td class="paramname">nOnce2</td><td>The second nonce. </td></tr>
    <tr><td class="paramname">updateDatabase</td><td>This defaults to true, meaning that the query will update the database with the results of the search. If this is changed to be false the query will only be read only. A read only query does not require correct nonce values to be able to return kReply_ValidKey. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aaff6b7faf39f033fd843ce1591ebbd1b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void CallbackQueryReply </td>
          <td>(</td>
          <td class="paramtype">Reply &amp;&#160;</td>
          <td class="paramname"><em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>userSuppliedReply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>nOnce1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>nOnce2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This callback may be used to alter the CodeServer::Reply. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reply</td><td>The reply from the key query. </td></tr>
    <tr><td class="paramname">userSuppliedReply</td><td>The user supplied reply. </td></tr>
    <tr><td class="paramname">nOnce1</td><td>The first reply nonce. </td></tr>
    <tr><td class="paramname">nOnce2</td><td>The second reply nonce. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4ecb9e1328a309e9f08504a9c79a22f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void CallbackQueryReplyTime </td>
          <td>(</td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>seconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This callback reports how long an query and reply took starting from when packet data was received until the packet data is sent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">seconds</td><td>The time in seconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aeae9e8604f408868c2b81418317e6987"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void CallbackVersion </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>version</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This callback may be used to ascertain the version of the request made. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">version</td><td>The version of the request. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2f92ea6ff7b3984251d5b586858e1c17"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float GetCodeTimeout </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the value configured by <a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a7d6c925816eb69c41b65c96882fed072">SetCodeTimeout()</a> </p>
<dl class="section return"><dt>Returns</dt><dd>The value configured by <a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html#a7d6c925816eb69c41b65c96882fed072">SetCodeTimeout()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a6403e5f26388c5447710d7aacb960400"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ReadCodeFile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>duplicateCodeCheck</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads codes from a file and stores the codes in a database in memory. Each code must be in a separate line. This function may be used when the code server has been started. Each call to this function will add codes to the database held in memory. Each code must be no longer than 255 characters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The filename to read. </td></tr>
    <tr><td class="paramname">duplicateCodeCheck</td><td>If this is true then each code is checked to make sure it is not a duplicate code already stored in the database. The default is false, which disables the duplicate code check and makes adding codes slightly faster. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Success returns true, failure returns false. </dd></dl>

</div>
</div>
<a class="anchor" id="a7beead29f96987560815b832f65159af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RemoveCode </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>code</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes codes from the database in memory. This function may be used when the code server has been started. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td>If the code is supplied the code is removed from the database in memory. If there is no code supplied then all codes are removed from the database in memory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Success returns true, failure returns false. </dd></dl>

</div>
</div>
<a class="anchor" id="a7d6c925816eb69c41b65c96882fed072"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetCodeTimeout </td>
          <td>(</td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>time</em> = <code>(60.0f&#160;*30.0f)</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This sets the time period that a code will be flagged as being used and kReply_KeyInUse will be returned from <a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeClient.html#ab364e941e8621c2c60bdd0403a692c4c">CodeClient::GetReply()</a>. After this time period has elapsed a request to validate the same code will be allowed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>The time in seconds. The default value is (60.0f * 30.0f) which is 30 minutes. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="afc8dd58a7a9ad30e0b783cd6977fca74"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetEncryptionKey </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the encryption key to be used by all queries for this server. The same key must be used with any <a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeClient.html" title="This code client queries for the validity of codes with the RNLobby::CodeServer. ">RNLobby::CodeClient</a> querying this server. The default encryption key is the same for <a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeServer.html">RNLobby::CodeServer</a> and <a class="el" href="classRNReplicaNet_1_1RNLobby_1_1CodeClient.html" title="This code client queries for the validity of codes with the RNLobby::CodeServer. ">RNLobby::CodeClient</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The data to use as a seed for the key. This can be NULL to use the default key. </td></tr>
    <tr><td class="paramname">length</td><td>The length of the data to use for creating the key. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abbc27f032cecdcd496b9ed5a9e3dd5c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Start </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structRNReplicaNet_1_1XPAddress.html">XPAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em> = <code><a class="el" href="structRNReplicaNet_1_1XPAddress.html">XPAddress</a>(kDefaultPort)</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starts the code server thread and processes code queries. If not already started the network hardware is started. </p>
<dl class="section return"><dt>Returns</dt><dd>Success returns true, failure returns false. </dd></dl>

</div>
</div>
<a class="anchor" id="af244830161c8e38375bdda05bc66cb3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Stop </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>hardware</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stops the code server thread and stops processing code queries. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hardware</td><td>If true this stops the network hardware. The default is false. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Success returns true, failure returns false. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 16 2020 20:08:35 for ReplicaNet and RNLobby by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
